<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jasa Cek Turnitin - WriteHuman</title>

  <link rel="shortcut icon" href="./assets/images/logo/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="./assets/css/style.css">
  <link rel="stylesheet" href="./assets/css/product-detail.css">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
</head>

<body>

  <div data-include="components/header.html"></div>

  <main>
    <div class="product-detail-page">
      <div class="container">
        
        <a href="services.html" class="btn-back-service">
            <ion-icon name="arrow-back-outline"></ion-icon> Kembali ke Layanan
        </a>

        <!-- Service Header -->
        <div class="service-header text-center mb-5">
            <h1 class="service-title">Cek Plagiasi Turnitin</h1>
            <p class="service-subtitle">Cek Plagiasi Cepat, Akurat, & 100% Aman (No Repository)</p>
            <div class="badges-container">
                <span class="badge-item"><ion-icon name="time-outline"></ion-icon> Proses 5-10 Menit</span>
                <span class="badge-item"><ion-icon name="shield-checkmark-outline"></ion-icon> Kerahasiaan Terjamin</span>
                <span class="badge-item"><ion-icon name="document-text-outline"></ion-icon> Hasil File PDF</span>
            </div>
        </div>

        <div class="product-detail-container layout-grid">
            
            <!-- Left Column: Info & Steps -->
            <div class="left-column">
                
                <div class="info-card">
                    <h3>Tentang Layanan</h3>
                    <p>Layanan pengecekan indeks plagiasi dokumen menggunakan akun Turnitin Instructor Premium. Sangat cocok untuk mahasiswa yang ingin mengecek skripsi, tesis, atau tugas kuliah sebelum disubmit ke kampus.</p>
                    <ul class="feature-list">
                        <li><ion-icon name="checkmark-circle"></ion-icon> <strong>No Repository:</strong> File tidak disimpan ke database Turnitin.</li>
                        <li><ion-icon name="checkmark-circle"></ion-icon> <strong>Aman:</strong> Tidak akan terdeteksi plagiat saat dicek ulang di kampus.</li>
                        <li><ion-icon name="checkmark-circle"></ion-icon> <strong>Full Report:</strong> Hasil berupa PDF lengkap dengan highlight plagiasi.</li>
                    </ul>
                </div>

                <div class="steps-card">
                    <h3>Cara Kerja</h3>
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Upload File</h4>
                            <p>Upload file dokumen (Word/PDF) yang ingin dicek.</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Pilih Mode</h4>
                            <p>Pilih mode "No Repository" (Wajib untuk mahasiswa).</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Proses Cepat</h4>
                            <p>Admin memproses file dalam 5-10 menit.</p>
                        </div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Terima Hasil</h4>
                            <p>Download laporan PDF hasil cek di Dashboard.</p>
                        </div>
                    </div>
                </div>

                <!-- Reviews Placeholder -->
                 <div class="reviews-preview-card" style="margin-top: 30px; background: #f9f9f9; padding: 20px; border-radius: 12px;">
                    <h3 style="font-size: 1.1rem; margin-bottom: 15px;">Ulasan Terpilih</h3>
                    <div class="mini-review">
                         <div class="stars" style="color: #ffc107; display: flex; align-items: center; gap: 2px;">
                            <ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon><ion-icon name="star"></ion-icon>
                        </div>
                        <p style="font-style: italic; font-size: 0.9rem; color: #555;">"Cepet banget min, 5 menit udah keluar hasilnya. Aman juga no repo!"</p>
                        <small>- Rian Saputra (Mahasiswa)</small>
                    </div>
                    <a href="service-reviews.html?service=turnitin" style="display: block; margin-top: 15px; text-decoration: none; color: var(--salmon-pink); font-size: 0.9rem; font-weight: 500;">
                        Lihat Semua Ulasan <ion-icon name="arrow-forward-outline"></ion-icon>
                    </a>
                 </div>

            </div>

            <!-- Right Column: Order Form -->
            <div class="right-column">
                <div class="order-card">
                    <h3>Form Cek Turnitin</h3>
                    <form id="orderForm">
                        <!-- A. Data User -->
                        <div class="section-label">Data Pemesan</div>
                        <div class="form-group">
                            <label>Nama Lengkap</label>
                            <input type="text" id="custName" required placeholder="Nama Anda">
                        </div>
                        <div class="form-group">
                            <label>Email Aktif</label>
                            <input type="email" id="custEmail" required placeholder="email@kampus.ac.id">
                        </div>

                        <!-- B. Upload File -->
                        <div class="section-label">Upload File (Docx / PDF)</div>
                        <div class="form-group">
                            <div class="file-upload-box" id="dropZone">
                                <ion-icon name="cloud-upload-outline"></ion-icon>
                                <p>Klik pilih file atau drag & drop</p>
                                <input type="file" id="fileInput" multiple accept=".doc,.docx,.pdf" hidden>
                                <button type="button" class="btn-select-file" onclick="document.getElementById('fileInput').click()">Pilih File</button>
                            </div>
                            <div id="fileList" class="file-list-container"></div>
                        </div>

                        <!-- C. Jenis Pengecekan -->
                        <div class="section-label">Jenis Pengecekan</div>
                        <div class="radio-group">
                            <label class="radio-card">
                                <input type="radio" name="checkType" value="non_repo" checked>
                                <div class="radio-content">
                                    <ion-icon name="shield-checkmark-outline"></ion-icon>
                                    <span>No Repository</span>
                                    <small>AMAN. Tidak tersimpan di database.</small>
                                </div>
                            </label>
                            <label class="radio-card">
                                <input type="radio" name="checkType" value="repo">
                                <div class="radio-content">
                                    <ion-icon name="server-outline"></ion-icon>
                                    <span>Repository</span>
                                    <small>UMUM. Masuk database Turnitin.</small>
                                </div>
                            </label>
                        </div>

                        <!-- Price Info -->
                        <div class="price-estimation-box">
                            <label>Estimasi Harga</label>
                            <div class="price-value" id="priceDisplay">Rp 0</div>
                            <small class="disclaimer-text">Harga per file. Hasil dikirim via dashboard & email.</small>
                        </div>

                        <button type="submit" class="btn-submit-order">
                            Kirim Pesanan <ion-icon name="arrow-forward-outline"></ion-icon>
                        </button>
                    </form>
                </div>
            </div>

        </div>

      </div>
    </div>
  </main>

  <div data-include="components/footer.html"></div>

  <script src="./assets/js/html-loader.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

  <!-- Page Specific Logic -->
  <!-- Supabase Import Map -->
  <script type="importmap">
    {
      "imports": {
        "@supabase/supabase-js": "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm"
      }
    }
  </script>

  <script type="module">
    import { submitOrder } from './assets/js/order-service.js';

    document.addEventListener('DOMContentLoaded', () => {
        const fileInput = document.getElementById('fileInput');
        const fileList = document.getElementById('fileList');
        const priceDisplay = document.getElementById('priceDisplay');
        const checkRadios = document.getElementsByName('checkType');
        const orderForm = document.getElementById('orderForm');
        
        let fileCount = 0;

        // Pricing Config
        const PRICE_NON_REPO = 5000;
        const PRICE_REPO = 3000;

        // 1. Handle File Upload
        fileInput.addEventListener('change', (e) => {
            fileList.innerHTML = '';
            const files = e.target.files;
            fileCount = files.length;
            
            if (files.length > 0) {
                Array.from(files).forEach((file) => {
                    const item = document.createElement('div');
                    item.className = 'file-item-preview';
                    item.innerHTML = `
                        <ion-icon name="document-text-outline"></ion-icon>
                        <span class="fname">${file.name}</span>
                        <span class="fsize">${(file.size/1024).toFixed(1)} KB</span>
                    `;
                    fileList.appendChild(item);
                });
            }
            calculatePrice();
        });

        // 2. Pricing Logic
        function calculatePrice() {
            if (fileCount === 0) {
                priceDisplay.textContent = 'Rp 0';
                return;
            }

            let pricePerFile = PRICE_NON_REPO;
            for(const radio of checkRadios) {
                if(radio.checked && radio.value === 'repo') pricePerFile = PRICE_REPO;
            }

            const total = fileCount * pricePerFile;
            priceDisplay.textContent = 'Rp ' + total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        }

        // Listeners
        checkRadios.forEach(r => r.addEventListener('change', calculatePrice));

        // 3. Submit Order
        orderForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (fileCount === 0) {
                alert("Silakan upload minimal 1 file!");
                return;
            }

            const btn = document.querySelector('.btn-submit-order');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span class="loader"></span> Memproses...';
            btn.disabled = true;

            const type = document.querySelector('input[name="checkType"]:checked').value === 'non_repo' ? 'No Repository' : 'Repository';
            const price = priceDisplay.textContent;

            // Prepare Data
            const orderData = {
                title: `Cek Turnitin (${fileCount} File)`,
                description: `Mode: ${type}`,
                service: 'Cek Turnitin',
                status: 'Menunggu Proses',
                price: price,
                deadline: '5-10 Menit',
                file_url: null
            };

            const success = await submitOrder(orderData);

            if (!success) {
                btn.innerHTML = originalText;
                btn.disabled = false;
            }
        });
    });
  </script>

  <style>
      /* Reusing styles from Jasa Ketik for consistency */
      .file-upload-box {
          border: 2px dashed #ddd;
          padding: 20px;
          text-align: center;
          border-radius: 10px;
          cursor: pointer;
          transition: all 0.3s;
      }
      .file-upload-box:hover {
          background: #f9f9f9;
          border-color: var(--salmon-pink);
      }
      .file-upload-box ion-icon {
          font-size: 2rem;
          color: var(--sonic-silver);
      }
      .file-item-preview {
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 8px;
          background: #f1f1f1;
          margin-top: 5px;
          border-radius: 6px;
          font-size: 0.85rem;
      }
      .radio-group {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 15px;
          margin-bottom: 20px;
      }
      .radio-card {
          cursor: pointer;
          position: relative;
      }
      .radio-card input {
          position: absolute;
          opacity: 0;
      }
      .radio-content {
          border: 1px solid #eee;
          padding: 15px;
          border-radius: 10px;
          display: flex;
          flex-direction: column;
          align-items: center;
          text-align: center;
          transition: 0.3s;
      }
      .radio-card input:checked + .radio-content {
          border-color: var(--salmon-pink);
          background: #fff0f0;
      }
      .section-label {
          font-weight: 600;
          color: var(--davys-gray);
          margin-bottom: 10px;
          margin-top: 20px;
          font-size: 0.95rem;
          border-bottom: 1px solid #eee;
          padding-bottom: 5px;
      }
      @media (max-width: 768px) {
          .radio-group {
              grid-template-columns: 1fr;
          }
      }
  </style>

</body>

</html>
